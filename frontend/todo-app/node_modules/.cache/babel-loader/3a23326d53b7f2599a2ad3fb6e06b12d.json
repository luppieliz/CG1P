{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Minh\\\\OneDrive\\\\Desktop\\\\CS 203 Project\\\\frontend\\\\todo-app\\\\src\\\\Components\\\\TodoComponent.jsx\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { Form, Formik, Field, ErrorMessage } from 'formik';\nimport TodoDataService from '../api/TodoDataService.js';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Placeholder from 'react-bootstrap/Placeholder';\nimport Card from 'react-bootstrap/Card';\nimport { SESSION_USER_BUSINESS, SESSION_USER_ID } from '../Constants.js';\nimport UserDataService from '../api/UserDataService.js';\nimport Multiselect from 'multiselect-react-dropdown';\nimport Switch from '@mui/material/Switch';\nimport FormControlLabel from '@mui/material/FormControlLabel'; // Page to update or add a specific todo\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass TodoComponent extends Component {\n  constructor(props) {\n    super(props); // State of the page - contains id, desc, and date for a specific todo.\n\n    this.state = {\n      userId: sessionStorage.getItem(SESSION_USER_ID),\n      id: this.props.match.params.id,\n      description: '',\n      targetDate: moment(new Date()).format('YYYY-MM-DD'),\n      listItems: [],\n      selectedValues: [],\n      employees: []\n    };\n    this.onSelect = this.onSelect.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n  } // on load of page\n\n\n  componentDidMount() {\n    UserDataService.retrieveUsersByBusiness(sessionStorage.getItem(SESSION_USER_BUSINESS)).then(response => {\n      this.setState({\n        listItems: response.data.map(employee => ({\n          name: employee.name + '  (' + employee.email + ')',\n          value: employee.id\n        }))\n      });\n    }); // if -1 (create), do not try to load todo as it is empty\n\n    if (this.state.id === \"-1\") {\n      return;\n    }\n\n    TodoDataService.retrieveTodo(this.state.userId, this.state.id).then(response => this.setState({\n      description: response.data.description,\n      targetDate: moment(response.data.targetDate).format('YYYY-MM-DD'),\n      selectedValues: response.data.createdFor.map(employee => ({\n        name: employee.name + '  (' + employee.email + ')',\n        value: employee.id\n      })),\n      employees: response.data.createdFor.map(employee => employee.id)\n    }));\n    console.log(this.state.employees);\n  } // for employee dropdown\n\n\n  onSelect(selectedList, selectedItem) {\n    this.state.employees.push(selectedItem.value);\n    console.log(this.state.employees);\n  } // for employee dropdown\n\n\n  onRemove(selectedList, removedItem) {\n    const index = this.state.employees.indexOf(removedItem.value);\n    this.state.employees.splice(index, 1);\n    console.log(this.state.employees);\n  } // on Formik Submit\n\n\n  onSubmit(values) {\n    let todo = {\n      description: values.description,\n      targetDate: values.targetDate,\n      createdForIds: this.state.employees\n    };\n    console.log(todo); // if state (todo id) is -1, means todo does not exist yet, means create todo\n\n    if (this.state.id == -1) {\n      TodoDataService.createTodo(this.state.userId, todo).then(() => this.props.history.push(\"/todos\")); // else state (todo id) is not -1, means todo exists, means update todo\n    } else {\n      TodoDataService.updateTodo(this.state.userId, this.state.id, todo).then(() => this.props.history.push(\"/todos\"));\n    }\n  } // on Formik Validate call\n  // if errors populated, will not call onSubmit above\n\n\n  validate(values) {\n    let errors = {};\n\n    if (!values.description) {\n      errors.description = \"Enter a description\";\n    } else if (values.description.length < 5) {\n      errors.description = \"Enter at least 5 characters for description\";\n    }\n\n    if (!moment(values.targetDate).isValid()) {\n      errors.targetDate = 'Enter a valid Target Date';\n    }\n\n    return errors;\n  }\n\n  render() {\n    // rely on modern JS destructuring, can assign/retrieve together\n    let {\n      description,\n      targetDate\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: [/*#__PURE__*/_jsxDEV(Placeholder, {\n            xs: 12,\n            bg: \"transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n            xs: 12,\n            bg: \"transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-dark\",\n              children: \"Todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n              xs: 12,\n              bg: \"transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container text-dark \",\n              children: [/*#__PURE__*/_jsxDEV(Formik, {\n                initialValues: {\n                  description,\n                  targetDate\n                },\n                onSubmit: this.onSubmit,\n                validateOnChange: false,\n                validateOnBlur: false,\n                validate: this.validate,\n                enableReinitialize: true,\n                children: props => /*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: /*#__PURE__*/_jsxDEV(Form, {\n                    children: [/*#__PURE__*/_jsxDEV(ErrorMessage, {\n                      name: \"description\",\n                      component: \"div\",\n                      className: \"alert alert-warning \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                      className: \"form-group\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Description\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 161,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(Field, {\n                        className: \"form-control\",\n                        type: \"text\",\n                        name: \"description\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                      xs: 12,\n                      bg: \"transparent\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                      className: \"form-group\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Assign To\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(Multiselect, {\n                        options: this.state.listItems,\n                        selectedValues: this.state.selectedValues,\n                        onSelect: this.onSelect,\n                        onRemove: this.onRemove,\n                        displayValue: \"name\",\n                        showCheckbox: true,\n                        closeOnSelect: false,\n                        placeholder: \"Select employees\",\n                        hidePlaceholder: true,\n                        avoidHighlightFirstOption: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 167,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                      className: \"form-group\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Target Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(Field, {\n                        className: \"form-control\",\n                        type: \"date\",\n                        name: \"targetDate\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                      xs: 12,\n                      bg: \"transparent\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-success\",\n                      type: \"submit\",\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default TodoComponent;","map":{"version":3,"sources":["C:/Users/Minh/OneDrive/Desktop/CS 203 Project/frontend/todo-app/src/Components/TodoComponent.jsx"],"names":["React","Component","moment","Form","Formik","Field","ErrorMessage","TodoDataService","Container","Row","Col","Placeholder","Card","SESSION_USER_BUSINESS","SESSION_USER_ID","UserDataService","Multiselect","Switch","FormControlLabel","TodoComponent","constructor","props","state","userId","sessionStorage","getItem","id","match","params","description","targetDate","Date","format","listItems","selectedValues","employees","onSelect","bind","onRemove","onSubmit","validate","componentDidMount","retrieveUsersByBusiness","then","response","setState","data","map","employee","name","email","value","retrieveTodo","createdFor","console","log","selectedList","selectedItem","push","removedItem","index","indexOf","splice","values","todo","createdForIds","createTodo","history","updateTodo","errors","length","isValid","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport { Form, Formik, Field, ErrorMessage } from 'formik'\r\nimport TodoDataService from '../api/TodoDataService.js'\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Placeholder from 'react-bootstrap/Placeholder'\r\n\r\nimport Card from 'react-bootstrap/Card'\r\n\r\nimport { SESSION_USER_BUSINESS, SESSION_USER_ID } from '../Constants.js'\r\nimport UserDataService from '../api/UserDataService.js'\r\nimport Multiselect from 'multiselect-react-dropdown'\r\nimport Switch from '@mui/material/Switch';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\n\r\n\r\n// Page to update or add a specific todo\r\nclass TodoComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        // State of the page - contains id, desc, and date for a specific todo.\r\n        this.state = {\r\n            userId: sessionStorage.getItem(SESSION_USER_ID),\r\n            id: this.props.match.params.id,\r\n            description: '',\r\n            targetDate: moment(new Date()).format('YYYY-MM-DD'),\r\n            listItems: [],\r\n            selectedValues: [],\r\n            employees: []\r\n\r\n        }\r\n\r\n        this.onSelect = this.onSelect.bind(this)\r\n        this.onRemove = this.onRemove.bind(this)\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n    }\r\n\r\n    // on load of page\r\n    componentDidMount() {\r\n\r\n        UserDataService.retrieveUsersByBusiness(sessionStorage.getItem(SESSION_USER_BUSINESS))\r\n            .then(response => {\r\n                this.setState({\r\n                    listItems: response.data.map(employee => ({\r\n                        name: employee.name + '  (' + employee.email + ')',\r\n                        value: employee.id\r\n                    }))\r\n                })\r\n            })\r\n\r\n        // if -1 (create), do not try to load todo as it is empty\r\n        if (this.state.id === \"-1\") {\r\n            return\r\n        }\r\n\r\n        TodoDataService.retrieveTodo(this.state.userId, this.state.id)\r\n            .then(response => this.setState({\r\n                description: response.data.description,\r\n                targetDate: moment(response.data.targetDate).format('YYYY-MM-DD'),\r\n                selectedValues: response.data.createdFor.map(employee => ({\r\n                    name: employee.name + '  (' + employee.email + ')',\r\n                    value: employee.id\r\n                })),\r\n                employees: response.data.createdFor.map(employee =>\r\n                    employee.id\r\n                )\r\n            }))\r\n\r\n        console.log(this.state.employees)\r\n    }\r\n\r\n    // for employee dropdown\r\n    onSelect(selectedList, selectedItem) {\r\n        this.state.employees.push(selectedItem.value)\r\n        console.log(this.state.employees)\r\n    }\r\n\r\n    // for employee dropdown\r\n    onRemove(selectedList, removedItem) {\r\n        const index = this.state.employees.indexOf(removedItem.value)\r\n        this.state.employees.splice(index, 1)\r\n        console.log(this.state.employees)\r\n    }\r\n\r\n    // on Formik Submit\r\n    onSubmit(values) {\r\n        let todo = {\r\n            description: values.description,\r\n            targetDate: values.targetDate,\r\n            createdForIds: this.state.employees\r\n        }\r\n\r\n        console.log(todo)\r\n\r\n        // if state (todo id) is -1, means todo does not exist yet, means create todo\r\n        if (this.state.id == -1) {\r\n            TodoDataService.createTodo(this.state.userId, todo)\r\n                .then(() => this.props.history.push(\"/todos\"))\r\n            // else state (todo id) is not -1, means todo exists, means update todo\r\n        } else {\r\n            TodoDataService.updateTodo(this.state.userId, this.state.id, todo)\r\n                .then(() => this.props.history.push(\"/todos\"))\r\n        }\r\n    }\r\n\r\n    // on Formik Validate call\r\n    // if errors populated, will not call onSubmit above\r\n    validate(values) {\r\n        let errors = {}\r\n\r\n        if (!values.description) {\r\n            errors.description = \"Enter a description\"\r\n        } else if (values.description.length < 5) {\r\n            errors.description = \"Enter at least 5 characters for description\"\r\n        }\r\n        if (!moment(values.targetDate).isValid()) {\r\n            errors.targetDate = 'Enter a valid Target Date'\r\n        }\r\n\r\n        return errors\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        // rely on modern JS destructuring, can assign/retrieve together\r\n        let { description, targetDate } = this.state\r\n\r\n        return (\r\n            <div>\r\n                <Col></Col>\r\n                <Col></Col>\r\n                <Col></Col>\r\n                <Col>\r\n                    <Container>\r\n                    <Placeholder xs={12} bg=\"transparent\" />\r\n                    <Placeholder xs={12} bg=\"transparent\" />\r\n                        <Row>\r\n                            <h1 className=\"text-dark\">Todo</h1>\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <div className=\"container text-dark \">\r\n                                <Formik\r\n                                    initialValues={{ description, targetDate }}\r\n                                    onSubmit={this.onSubmit}\r\n                                    validateOnChange={false}\r\n                                    validateOnBlur={false}\r\n                                    validate={this.validate}\r\n                                    enableReinitialize={true}\r\n                                >\r\n                                    {\r\n                                        (props) => (\r\n                                            <h5>\r\n                                            <Form>\r\n                                                <ErrorMessage name=\"description\" component=\"div\" className=\"alert alert-warning \"></ErrorMessage>\r\n                                                <fieldset className=\"form-group\">\r\n                                                    <label >Description</label>\r\n                                                    <Field className=\"form-control\" type=\"text\" name=\"description\"></Field>\r\n                                                </fieldset>\r\n                                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                                <fieldset className=\"form-group\">\r\n                                                    <label >Assign To</label>\r\n                                                    <Multiselect\r\n                                                        options={this.state.listItems}\r\n                                                        selectedValues={this.state.selectedValues}\r\n                                                        onSelect={this.onSelect}\r\n                                                        onRemove={this.onRemove}\r\n                                                        displayValue=\"name\"\r\n                                                        showCheckbox\r\n                                                        closeOnSelect={false}\r\n                                                        placeholder=\"Select employees\"\r\n                                                        hidePlaceholder\r\n                                                        avoidHighlightFirstOption\r\n                                                    />\r\n                                                </fieldset>\r\n                                                \r\n                                                <fieldset className=\"form-group\">\r\n                                                    <label>Target Date</label>\r\n                                                    <Field className=\"form-control\" type=\"date\" name=\"targetDate\" />\r\n                                                </fieldset>\r\n\r\n                                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                                <button className=\"btn btn-success\" type=\"submit\" >Save</button>\r\n                                            </Form>\r\n                                            </h5>\r\n                                        )\r\n                                    }\r\n                                </Formik>\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n                                <Placeholder xs={12} bg=\"transparent\" />\r\n\r\n                            </div>\r\n                        </Row>\r\n                    </Container>\r\n                </Col>\r\n                <Col></Col>\r\n                <Col></Col>\r\n                <Col></Col>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TodoComponent"]},"metadata":{},"sourceType":"module"}