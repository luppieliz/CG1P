{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Minh\\\\OneDrive\\\\Desktop\\\\CS 203 Project\\\\frontend\\\\todo-app\\\\src\\\\Components\\\\LoginComponent.jsx\";\nimport React, { Component } from 'react';\nimport AuthenticationService from '../api/AuthenticationService.js';\nimport { Image } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Placeholder from 'react-bootstrap/Placeholder';\nimport { SESSION_USER_BUSINESS, SESSION_USER_ID, SESSION_USER_NAME, SESSION_USER_ROLE } from '../Constants.js';\nimport GLOBE from 'vanta/dist/vanta.net.min'; // Log In\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.vantaRef = /*#__PURE__*/React.createRef(); // State - contains the email, password, and hasLoginFailed boolean fields.\n\n    this.state = {\n      email: 'admin@gmail.com',\n      password: 'goodpassword',\n      hasLoginFailed: false // boolean 1\n\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.loginClicked = this.loginClicked.bind(this);\n  }\n\n  componentDidMount() {\n    this.vantaEffect = GLOBE({\n      el: this.vantaRef.current,\n      mouseControls: true,\n      touchControls: true,\n      gyroControls: false,\n      minHeight: 200.0,\n      minWidth: 200.0,\n      scale: 1.0,\n      scaleMobile: 1.0,\n      color: 0x777777,\n      color2: 0xFFFFFF,\n      backgroundColor: 0x000000\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.vantaEffect) this.vantaEffect.destroy();\n  } // handle change in a field (manual way)\n\n\n  handleChange(event) {\n    this.setState({\n      // pull name from event and change that in the state to the new value from the event\n      // square bracket to tell JS you are handling a variable instead of constant\n      [event.target.name]: event.target.value\n    });\n  } // On login click, execute Basic Auth Service to ensure user and pass match with the backend.\n  // If successful, use authenticationService to register the log in ad redirect to the welcone page for that user\n  // Else, set login failed to true to display alert\n\n\n  loginClicked() {\n    AuthenticationService.executeBasicAuthenticationService(this.state.email, this.state.password).then(() => {\n      console.log('Login phase 1 complete');\n      return AuthenticationService.registerSuccessfulLoginForBasicAuth(this.state.email);\n    }).then(response => {\n      console.log('Login phase 2 complete');\n      console.log('Response: ', response.data);\n      sessionStorage.setItem(SESSION_USER_ID, response.data.id);\n      sessionStorage.setItem(SESSION_USER_NAME, response.data.name);\n      sessionStorage.setItem(SESSION_USER_BUSINESS, response.data.business.id);\n      sessionStorage.setItem(SESSION_USER_ROLE, response.data.authority);\n      this.props.history.push(`/welcome`);\n    }).catch(() => {\n      this.setState({\n        hasLoginFailed: true\n      });\n    });\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      // In JavaScript, BOOLEAN && SHOW X means IF BOOLEAN, THEN SHOW X\n      // If login is failed (reflected in state), display alert.\n      _jsxDEV(\"div\", {\n        style: {\n          height: \"92vh\",\n          width: \"100%\"\n        },\n        ref: this.vantaRef,\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"h0\", {\n                className: \"cg1p-header\",\n                children: \"Buddy-19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"cg1p-header\",\n                style: {\n                  color: \"#ffffff\"\n                },\n                children: \"Log In\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                xs: 12,\n                bg: \"transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              className: \"text-black text-left\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group \",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control\",\n                      name: \"email\",\n                      value: this.state.email,\n                      onChange: this.handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 120,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"password\",\n                      className: \"form-control\",\n                      name: \"password\",\n                      value: this.state.password,\n                      onChange: this.handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 12,\n                    bg: \"transparent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-dark\",\n                    onClick: this.loginClicked,\n                    children: \"Login\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 12,\n                    bg: \"transparent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"forgot-password text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"#placeholder\",\n                      children: \"Forgot password?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 80\n                    }, this), \" or new to the app? \", /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"new user text-right\",\n                      to: \"/signup\",\n                      children: \"Sign up!\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 143\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 37\n                  }, this), this.state.hasLoginFailed && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"alert alert-warning\",\n                    children: \"Invalid Credentials\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 67\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)\n    );\n  }\n\n}\n\nexport default LoginComponent;","map":{"version":3,"sources":["C:/Users/Minh/OneDrive/Desktop/CS 203 Project/frontend/todo-app/src/Components/LoginComponent.jsx"],"names":["React","Component","AuthenticationService","Image","Link","Container","Row","Button","Col","Card","Placeholder","SESSION_USER_BUSINESS","SESSION_USER_ID","SESSION_USER_NAME","SESSION_USER_ROLE","GLOBE","LoginComponent","constructor","props","vantaRef","createRef","state","email","password","hasLoginFailed","handleChange","bind","loginClicked","componentDidMount","vantaEffect","el","current","mouseControls","touchControls","gyroControls","minHeight","minWidth","scale","scaleMobile","color","color2","backgroundColor","componentWillUnmount","destroy","event","setState","target","name","value","executeBasicAuthenticationService","then","console","log","registerSuccessfulLoginForBasicAuth","response","data","sessionStorage","setItem","id","business","authority","history","push","catch","render","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport AuthenticationService from '../api/AuthenticationService.js'\r\nimport { Image } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Button from 'react-bootstrap/Button'\r\n\r\nimport Col from 'react-bootstrap/Col'\r\nimport Card from 'react-bootstrap/Card'\r\nimport Placeholder from 'react-bootstrap/Placeholder'\r\nimport { SESSION_USER_BUSINESS, SESSION_USER_ID, SESSION_USER_NAME, SESSION_USER_ROLE } from '../Constants.js'\r\n\r\nimport GLOBE from 'vanta/dist/vanta.net.min'\r\n\r\n// Log In\r\nclass LoginComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.vantaRef = React.createRef()\r\n\r\n\r\n        // State - contains the email, password, and hasLoginFailed boolean fields.\r\n        this.state = {\r\n            email: 'admin@gmail.com',\r\n            password: 'goodpassword',\r\n            hasLoginFailed: false, // boolean 1\r\n        }\r\n\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.loginClicked = this.loginClicked.bind(this)\r\n    }\r\n    componentDidMount() {\r\n        this.vantaEffect = GLOBE({\r\n            el: this.vantaRef.current,\r\n            mouseControls: true,\r\n            touchControls: true,\r\n            gyroControls: false,\r\n            minHeight: 200.0,\r\n            minWidth: 200.0,\r\n            scale: 1.0,\r\n            scaleMobile: 1.0,\r\n            color: 0x777777,\r\n            color2: 0xFFFFFF,\r\n            backgroundColor: 0x000000\r\n        })\r\n    }\r\n    componentWillUnmount() {\r\n        if (this.vantaEffect) this.vantaEffect.destroy()\r\n    }\r\n\r\n    // handle change in a field (manual way)\r\n    handleChange(event) {\r\n        this.setState(\r\n            {\r\n                // pull name from event and change that in the state to the new value from the event\r\n                // square bracket to tell JS you are handling a variable instead of constant\r\n                [event.target.name]: event.target.value\r\n            }\r\n        )\r\n    }\r\n\r\n    // On login click, execute Basic Auth Service to ensure user and pass match with the backend.\r\n    // If successful, use authenticationService to register the log in ad redirect to the welcone page for that user\r\n    // Else, set login failed to true to display alert\r\n    loginClicked() {\r\n        AuthenticationService.executeBasicAuthenticationService(this.state.email, this.state.password)\r\n            .then(() => {\r\n                console.log('Login phase 1 complete')\r\n                return AuthenticationService.registerSuccessfulLoginForBasicAuth(this.state.email)\r\n            })\r\n            .then(response => {\r\n                console.log('Login phase 2 complete')\r\n                console.log('Response: ', response.data)\r\n                sessionStorage.setItem(SESSION_USER_ID, response.data.id)\r\n                sessionStorage.setItem(SESSION_USER_NAME, response.data.name)\r\n                sessionStorage.setItem(SESSION_USER_BUSINESS, response.data.business.id)\r\n                sessionStorage.setItem(SESSION_USER_ROLE, response.data.authority)\r\n\r\n                this.props.history.push(`/welcome`)\r\n            })\r\n            .catch(() => {\r\n                this.setState({ hasLoginFailed: true })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n\r\n            // In JavaScript, BOOLEAN && SHOW X means IF BOOLEAN, THEN SHOW X\r\n            // If login is failed (reflected in state), display alert.\r\n            <div style={{ height: \"92vh\", width: \"100%\" }} ref={this.vantaRef}>\r\n                <Container >\r\n                    <Row>\r\n                        <Col>\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <h0 className=\"cg1p-header\" >Buddy-19</h0>\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <h1 className=\"cg1p-header\" style={{color:\"#ffffff\"}}>Log In</h1>\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                            <Placeholder xs={12} bg=\"transparent\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col></Col>\r\n                        <Col className=\"text-black text-left\">\r\n                            <Card>\r\n                                <Card.Body>\r\n                                    <div className=\"form-group \">\r\n                                        <label>Email</label>\r\n                                        <input type=\"text\" className=\"form-control\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Password</label>\r\n                                        <input type=\"password\" className=\"form-control\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\r\n                                    </div>\r\n                                    <Placeholder xs={12} bg=\"transparent\" />\r\n                                    <Button variant=\"outline-dark\" onClick={this.loginClicked}>Login</Button>\r\n                                    <Placeholder xs={12} bg=\"transparent\" />\r\n                                    <p className=\"forgot-password text-center\"><a href=\"#placeholder\">Forgot password?</a> or new to the app? <Link className=\"new user text-right\" to=\"/signup\">Sign up!</Link></p>\r\n                                    {this.state.hasLoginFailed && <div className=\"alert alert-warning\">Invalid Credentials</div>}\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col></Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginComponent"]},"metadata":{},"sourceType":"module"}